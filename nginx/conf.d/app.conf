  # 1. Definimos el grupo de servidores API (upstream)
  upstream api_backend {
      server api-1:3000;
      server api-2:3000;
      server api-3:3000;
  }
  
  # 2. Definimos el servidor virtual
  server {
      listen 80;
  
      # Cualquier petici√≥n que llegue...
      location / { 
          # ... la enviamos al grupo de APIs
          proxy_pass http://api_backend; 
  
          # Cabeceras importantes para el proxy
          proxy_set_header Host $host;
          proxy_set_header X-Real-IP $remote_addr;
          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          proxy_set_header X-Forwarded-Proto $scheme;
      }
  }
  